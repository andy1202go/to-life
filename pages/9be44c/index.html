<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>为什么你开发的网页不应该大于14KB？ | to-life</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220720_132133.ico">
    <script language="javascript" type="text/javascript" src="/to-life/js/pgmanor-self.js"></script>
    <meta name="description" content="vdoing博客主题模板">
    <meta name="keywords" content="AL，生活不只是coding">
    <meta name="theme-color" content="#11a8cd">
    <meta name="referrer" content="no-referrer-when-downgrade">
    
    <link rel="preload" href="/to-life/assets/css/0.styles.424f8ff0.css" as="style"><link rel="preload" href="/to-life/assets/js/app.7ddbd8c3.js" as="script"><link rel="preload" href="/to-life/assets/js/2.37b775d4.js" as="script"><link rel="preload" href="/to-life/assets/js/48.15fba1b8.js" as="script"><link rel="prefetch" href="/to-life/assets/js/10.534dffca.js"><link rel="prefetch" href="/to-life/assets/js/11.5498ffe0.js"><link rel="prefetch" href="/to-life/assets/js/12.3f4233b3.js"><link rel="prefetch" href="/to-life/assets/js/13.be1c19bf.js"><link rel="prefetch" href="/to-life/assets/js/14.16ff38db.js"><link rel="prefetch" href="/to-life/assets/js/15.e7c6dd2e.js"><link rel="prefetch" href="/to-life/assets/js/16.fc191049.js"><link rel="prefetch" href="/to-life/assets/js/17.c81564e1.js"><link rel="prefetch" href="/to-life/assets/js/18.29a9acbf.js"><link rel="prefetch" href="/to-life/assets/js/19.7d96b420.js"><link rel="prefetch" href="/to-life/assets/js/20.df4f7d02.js"><link rel="prefetch" href="/to-life/assets/js/21.0533f4cd.js"><link rel="prefetch" href="/to-life/assets/js/22.dc3d26b5.js"><link rel="prefetch" href="/to-life/assets/js/23.9ce74929.js"><link rel="prefetch" href="/to-life/assets/js/24.77acf017.js"><link rel="prefetch" href="/to-life/assets/js/25.27c31554.js"><link rel="prefetch" href="/to-life/assets/js/26.5aa7006c.js"><link rel="prefetch" href="/to-life/assets/js/27.4d1ce54c.js"><link rel="prefetch" href="/to-life/assets/js/28.1060ed41.js"><link rel="prefetch" href="/to-life/assets/js/29.a570ddba.js"><link rel="prefetch" href="/to-life/assets/js/3.70ce057e.js"><link rel="prefetch" href="/to-life/assets/js/30.2edeb72e.js"><link rel="prefetch" href="/to-life/assets/js/31.60b69a37.js"><link rel="prefetch" href="/to-life/assets/js/32.6e9f2bc9.js"><link rel="prefetch" href="/to-life/assets/js/33.791cd005.js"><link rel="prefetch" href="/to-life/assets/js/34.c8bdcf2b.js"><link rel="prefetch" href="/to-life/assets/js/35.014592cb.js"><link rel="prefetch" href="/to-life/assets/js/36.22d87869.js"><link rel="prefetch" href="/to-life/assets/js/37.a745ea9b.js"><link rel="prefetch" href="/to-life/assets/js/38.dcf17798.js"><link rel="prefetch" href="/to-life/assets/js/39.06bed35d.js"><link rel="prefetch" href="/to-life/assets/js/4.59612a66.js"><link rel="prefetch" href="/to-life/assets/js/40.7dead405.js"><link rel="prefetch" href="/to-life/assets/js/41.dfce032b.js"><link rel="prefetch" href="/to-life/assets/js/42.fa17b8fd.js"><link rel="prefetch" href="/to-life/assets/js/43.c4c77ece.js"><link rel="prefetch" href="/to-life/assets/js/44.1eff675b.js"><link rel="prefetch" href="/to-life/assets/js/45.67e71c07.js"><link rel="prefetch" href="/to-life/assets/js/46.c0ebbdd8.js"><link rel="prefetch" href="/to-life/assets/js/47.4688aa53.js"><link rel="prefetch" href="/to-life/assets/js/49.0b3dd931.js"><link rel="prefetch" href="/to-life/assets/js/5.3232f2da.js"><link rel="prefetch" href="/to-life/assets/js/50.b6c810b1.js"><link rel="prefetch" href="/to-life/assets/js/51.6eec1da4.js"><link rel="prefetch" href="/to-life/assets/js/52.aac04d70.js"><link rel="prefetch" href="/to-life/assets/js/53.7944ef0a.js"><link rel="prefetch" href="/to-life/assets/js/54.c60511d6.js"><link rel="prefetch" href="/to-life/assets/js/55.3c1a9e13.js"><link rel="prefetch" href="/to-life/assets/js/56.3223ab48.js"><link rel="prefetch" href="/to-life/assets/js/57.ef4addd3.js"><link rel="prefetch" href="/to-life/assets/js/58.a7e7be67.js"><link rel="prefetch" href="/to-life/assets/js/59.44918e0c.js"><link rel="prefetch" href="/to-life/assets/js/6.89fb6908.js"><link rel="prefetch" href="/to-life/assets/js/60.8160591d.js"><link rel="prefetch" href="/to-life/assets/js/61.aa8f2af4.js"><link rel="prefetch" href="/to-life/assets/js/62.58344ffc.js"><link rel="prefetch" href="/to-life/assets/js/63.a41f6241.js"><link rel="prefetch" href="/to-life/assets/js/64.286fcb06.js"><link rel="prefetch" href="/to-life/assets/js/65.a44bdc12.js"><link rel="prefetch" href="/to-life/assets/js/66.f16d77bf.js"><link rel="prefetch" href="/to-life/assets/js/67.ec3fd7ef.js"><link rel="prefetch" href="/to-life/assets/js/68.840599b8.js"><link rel="prefetch" href="/to-life/assets/js/69.a4985563.js"><link rel="prefetch" href="/to-life/assets/js/7.06fd6662.js"><link rel="prefetch" href="/to-life/assets/js/8.b62809c9.js"><link rel="prefetch" href="/to-life/assets/js/9.9add9b3a.js">
    <link rel="stylesheet" href="/to-life/assets/css/0.styles.424f8ff0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/to-life/" class="home-link router-link-active"><img src="https://cdn.staticaly.com/gh/eryajf/tu/main/img/image_20220720_132208.png" alt="to-life" class="logo"> <span class="site-name can-hide">to-life</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/to-life/" class="nav-link">首页</a></div><div class="nav-item"><a href="/to-life/rookie/" class="nav-link">入门</a></div><div class="nav-item"><a href="/to-life/behavior/" class="nav-link">修养</a></div><div class="nav-item"><a href="/to-life/basic/" class="nav-link">专业基础</a></div><div class="nav-item"><a href="/to-life/design/" class="nav-link">软件设计</a></div><div class="nav-item"><a href="/to-life/grow/" class="nav-link">高手成长</a></div><div class="nav-item"><a href="/to-life/learn/" class="nav-link">学习方式方法</a></div><div class="nav-item"><a href="/to-life/message-board/" class="nav-link">留言板</a></div> <a href="https://github.com/andy1202go/to-life" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/to-life/" class="nav-link">首页</a></div><div class="nav-item"><a href="/to-life/rookie/" class="nav-link">入门</a></div><div class="nav-item"><a href="/to-life/behavior/" class="nav-link">修养</a></div><div class="nav-item"><a href="/to-life/basic/" class="nav-link">专业基础</a></div><div class="nav-item"><a href="/to-life/design/" class="nav-link">软件设计</a></div><div class="nav-item"><a href="/to-life/grow/" class="nav-link">高手成长</a></div><div class="nav-item"><a href="/to-life/learn/" class="nav-link">学习方式方法</a></div><div class="nav-item"><a href="/to-life/message-board/" class="nav-link">留言板</a></div> <a href="https://github.com/andy1202go/to-life" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>编程语言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/to-life/pages/bc027e/" class="sidebar-link">学习资源</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>理论学科</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/to-life/pages/67c786/" class="sidebar-link">学习资源</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>系统知识</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/to-life/pages/004eee/" class="sidebar-link">学习资源</a></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>Unix 高级环境编程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/to-life/pages/aed997/" class="sidebar-link">命令行的艺术</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>TCP:IP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/to-life/pages/9be44c/" aria-current="page" class="active sidebar-link">为什么你开发的网页不应该大于14KB？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/to-life/pages/9be44c/#_1-tcp-是什么" class="sidebar-link">1 TCP 是什么</a></li><li class="sidebar-sub-header level2"><a href="/to-life/pages/9be44c/#_2-什么是-tcp-慢启动" class="sidebar-link">2 什么是 TCP 慢启动</a></li><li class="sidebar-sub-header level2"><a href="/to-life/pages/9be44c/#_3-那么-14kb-这个数字是怎么来的" class="sidebar-link">3 那么 14KB 这个数字是怎么来的</a></li><li class="sidebar-sub-header level2"><a href="/to-life/pages/9be44c/#_4-了解了-14kb-法则-接下来可以做些什么" class="sidebar-link">4 了解了 14KB 法则，接下来可以做些什么</a></li><li class="sidebar-sub-header level2"><a href="/to-life/pages/9be44c/#原文链接" class="sidebar-link">原文链接：</a></li></ul></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>实践项目</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/to-life/pages/97094d/" class="sidebar-link">系统知识实践原则</a></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/to-life/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/to-life/basic/#专业基础" data-v-06225672>专业基础</a></li><li data-v-06225672><a href="/to-life/basic/#系统知识" data-v-06225672>系统知识</a></li><li data-v-06225672><a href="/to-life/basic/#TCP:IP" data-v-06225672>TCP:IP</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/andy1202go" target="_blank" title="作者" class="beLink" data-v-06225672>AL</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-09-01</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">为什么你开发的网页不应该大于14KB？<span class="title-tag">转载</span></h1> <!----> <div class="theme-vdoing-content content__default"><p>网页越小，加载速度就越快——这一点都不奇怪。</p> <p>但令人感到惊讶的是，14KB 网页的加载速度比 15KB 要快得多——可能快 612 毫秒——而 15KB 和 16KB 网页之间的加载速度差异微乎其微。</p> <p>这是 TCP 慢启动算法导致的。本文将介绍这个算法、它的原理以及为什么你应该关注它。但首先我们需要快速过一遍一些基础知识。</p> <h2 id="_1-tcp-是什么"><a href="#_1-tcp-是什么" class="header-anchor">#</a> 1 TCP 是什么</h2> <p>传输控制协议（Transmission Control Protocol，TCP）是一种使用 IP 协议可靠地发送数据包的方法——有时被称为 TCP/IP。</p> <p>当浏览器向你的网站（或图像或样式表）发出请求时，它会使用 HTTP 请求。HTTP 建立在 TCP 之上，一个 HTTP 请求通常由许多 TCP 数据包组成。IP 只是一个将数据包从互联网上的一个位置发送到另一个位置的系统。IP 没有检查数据包是否成功到达目的地的方法。</p> <p>对于网站来说，确保所有的数据到达请求端是非常关键的，否则我们可能会因为丢失数据包无法获得完整的网页。但在网络的其他应用场景中，这一点并不那么重要——比如流媒体直播视频。</p> <p>TCP 是 IP 的扩展，浏览器和网站服务器通过它告诉对方哪些数据包已经成功到达。</p> <p>服务器发送一些数据包，然后等待浏览器已经收到数据包的响应（这叫确认或 ACK），然后它继续发送更多的数据包——或者如果它没有收到 ACK，将再次发送相同的数据包。</p> <h2 id="_2-什么是-tcp-慢启动"><a href="#_2-什么是-tcp-慢启动" class="header-anchor">#</a> 2 什么是 TCP 慢启动</h2> <p>TCP 慢启动是一种算法，服务器用它来确定一次可以发送多少数据包。</p> <p>当浏览器第一次连接到服务器时，服务器无法知道它们之间的带宽是多少。带宽是指在单位时间内网络可以传输的数据量。通常以比特 / 秒（b/s）为单位。我们可以用管道来作类比——把带宽想象成每秒从管道流出多少水。</p> <p>服务器不知道网络连接可以处理多少数据——所以它先发送少量且安全的数据——通常是 10 个 TCP 数据包。如果这些数据包成功地到达网站访问者，他们的计算机返回确认（ACK），表示数据包已经被收到了。然后，服务器发送更多的数据包，但这一次它将数据包的数量增加了一倍。</p> <p>这个过程会不断重复，直到数据包丢失，服务器没有收到 ACK。（此时，服务器会继续发送数据包，但速度较慢）。</p> <p>这就是 TCP 慢启动的要点——在现实当中，虽然算法各不相同，但这是它的基本原理。</p> <h2 id="_3-那么-14kb-这个数字是怎么来的"><a href="#_3-那么-14kb-这个数字是怎么来的" class="header-anchor">#</a> 3 那么 14KB 这个数字是怎么来的</h2> <p>大多数 Web 服务器的 TCP 慢启动算法都是从发送 10 个 TCP 数据包开始的。</p> <p>TCP 数据包最大长度为 1500 字节。这个最大值不是由 TCP 规范设置的，它来自于以太网标准。</p> <p>每个 TCP 数据包的标头占了 40 个字节，其中 16 个字节用于 IP，另外 24 个字节用于 TCP。</p> <p>这样每个 TCP 数据包还剩下 1460 个字节。10 x 1460 = 14600 字节，或大约 14KB！</p> <p>因此，如果你能把网站的网页——或网页的关键部分——压缩到 14KB，就可以为访问者节省大量的时间——他们和网站服务器之间的往返时间。</p> <p>一个数据往返能有多糟糕？但人们非常没有耐心——一个数据往返可能会出奇地长，具体多长取决于延迟……延迟是指数据包从源传输到目的地所花费的时间。如果带宽是每秒钟可以通过管道的水的数量，那么延迟就是一滴水进入管道后从另一端流出所花费的时间。</p> <p>下面是一个关于延迟有多糟糕的例子。</p> <p>卫星网络</p> <p>卫星网络是由环绕地球轨道的卫星提供的，在人烟稀少的地区、石油钻井平台、游轮以及飞机上，人们可以使用这种网络。</p> <p>为了说明这种糟糕的延迟，我们想象一群在石油钻井平台工作的兄弟把骰子忘在了家里，他们需要通过 missingdice.com（少于 14KB）来玩《龙与地下城》游戏。</p> <p>首先，他们中的一个用手机发出一个网页请求……</p> <p>手机将请求发送到钻井平台的 WiFi 路由器，路由器将数据发送给平台上的卫星天线，我们假设这可能需要 1 毫秒时间。</p> <p>然后，卫星天线将数据发送到地球轨道上方的卫星。</p> <p>通常，这是通过在地球表面上方 35786 公里处运行的轨道卫星实现的。光速为 299792458 米 / 秒，所以信息从地球发送到卫星需要 120 毫秒。然后，卫星将信息传回地面接收站，这又需要 120 毫秒。</p> <p>然后，地面站必须将请求发送到位于地球任意位置的服务器（当光通过光纤电缆传输时，速度会降至每秒 200000000 米）。如果地面站和服务器之间的距离等于纽约到伦敦之间的距离，那么大约需要 28 毫秒，如果地面站和服务器之间的距离等于纽约到悉尼之间的距离，则需要 80 毫秒——所以我们姑且定一个 60 毫秒的数字（这个数字便于计算）。</p> <p>然后，服务器需要处理请求，这可能需要 10 毫秒，然后服务器再次将它发送出去。</p> <p>回到地面站，进入太空，回到卫星天线，然后回到无线路由器，再到手机上。</p> <blockquote><p>手机 -&gt; WiFi 路由器 -&gt;卫星天线 -&gt;卫星 -&gt; 地面站 -&gt; 服务器 -&gt; 地面站 -&gt; 卫星 -&gt; 卫星天线 -&gt; WiFi 路由器 -&gt; 手机</p></blockquote> <p>如果我们算一下，就是 10 + ( 1 + 120 + 120 + 60 ) x 2 = 612 毫秒。</p> <p>这是每次往返额外的 612 毫秒——也许这看起来不是很长时间，但你的网站可能只是为了获取第一个资源就需要许多个往返。</p> <p>另外，HTTPS 在完成第一个往返之前需要额外的两次往返——这使延迟达到了 1836 毫秒！</p> <p>对于生活在陆地上的人，延迟又是怎样的</p> <p>卫星网络似乎是一个极端的例子——我选择它作为例子是因为它能够充分说明了网络延迟这个问题——但对于生活在陆地上的人来说，延迟可能比这更糟糕，原因有很多。</p> <ul><li>2G 网络的延迟通常在 300 毫秒到 1000 毫秒之间；</li> <li>3G 网络的延迟可以在 100 毫秒到 500 毫秒之间；</li> <li>嘈杂的移动网络——比如在一个异常拥挤的地方，比如音乐节；</li> <li>处理大流量的服务器；</li> <li>其他一些不好的东西。</li></ul> <p>不稳定的网络连接也会导致数据包丢失——导致需要另一个往返来获取丢失的数据包。</p> <h2 id="_4-了解了-14kb-法则-接下来可以做些什么"><a href="#_4-了解了-14kb-法则-接下来可以做些什么" class="header-anchor">#</a> 4 了解了 14KB 法则，接下来可以做些什么</h2> <p>当然，你应该让你的网页尽可能的小——你爱你的访客，你希望他们开心。将每个页面的大小控制在 14KB 以内是一个不错的主意。</p> <p>这 14KB 可以是压缩数据——所以实际上可以对应大约 50KB 的未压缩数据——这已经非常慷慨了。要知道，阿波罗 11 的制导计算机只有 72KB 内存。</p> <p>去掉自动播放的视频、弹出窗口、Cookie、Cookie 横幅、社交网络按钮、跟踪脚本、JavaScript 和 CSS 框架，以及所有其他人们不喜欢的垃圾——你可能就能实现 14KB 法则。</p> <p>假设你已经尽力将所有内容控制在 14KB 以内，但仍然做不到——但 14KB 法则仍然很有用。</p> <p>你可以用发送给访问者的前 14KB 数据来渲染一些有用的东西——例如一些关键的 CSS、JS 和解释如何使用你的应用程序的前几段文本。</p> <p>需要注意的是，14KB 法则包含了 HTTP 标头——这些是未压缩的（即使是 HTTP/2 的第一个响应），也包含图片，所以你应该只加载在页面上方的内容，并保持它们最小，或者使用占位符，让访问者知道他们在等待一些更好的内容。</p> <p>关于这个法则的一些注意事项</p> <p>14KB 法则更像是一种经验之谈，而不是计算的基本法则。</p> <ul><li>一些服务器已经将 TCP 慢启动初始窗口从 10 个数据包增加到 30 个；</li> <li>有时服务器知道它可以从更大数量的数据包开始传输，因为它使用 TLS 握手来建立一个更大的窗口；</li> <li>服务器可以缓存路由可管理的数据包数量，并在下一次连接时发送更多的数据包；</li> <li>还有其他需要注意的地方——这里有一篇文章更深入地探讨关于为什么 14KB 法则并不总是这么回事。</li></ul> <p>（https://www.tunetheweb.com/blog/critical-resources-and-the-first-14kb/）。</p> <p>HTTP/2 和 14KB 法则</p> <p>有一种观点认为，在使用 HTTP/2 时，14KB 法则不再适用。我已经读了所有我能读到的关于这个问题的东西，但我还没有看到任何证据表明使用 HTTP/2 的服务器已经停止使用 TCP 慢启动（从 10 个数据包开始）。</p> <p>HTTP/3 和 QUIC</p> <p>与 HTTP/2 类似，有一种观点认为 HTTP/3 和 QUIC 将废除 14KB 法则——事实并非如此。实际上，QUIC 仍然建议使用 14KB 法则。</p> <h2 id="原文链接"><a href="#原文链接" class="header-anchor">#</a> 原文链接：</h2> <p>https://endtimes.dev/why-your-website-should-be-under-14kb-in-size/</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/andy1202go/to-life/edit/main/docs/03.专业基础/03.系统知识/04.TCP:IP/01.为什么你开发的网页不应该大于14KB？.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/17/2023, 11:49:33 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/to-life/pages/aed997/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">命令行的艺术</div></a> <a href="/to-life/pages/97094d/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">系统知识实践原则</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/to-life/pages/aed997/" class="prev">命令行的艺术</a></span> <span class="next"><a href="/to-life/pages/97094d/">系统知识实践原则</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><div class="icons"><a href="https://github.com/andy1202go" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="mailto:andy1202go@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/andy1202go" title="Gitee" target="_blank" class="iconfont icon-gitee"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2023
    <span>Eryajf | <a href="https://github.com/eryajf/to-life/blob/main/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><!----></div></div>
    <script src="/to-life/assets/js/app.7ddbd8c3.js" defer></script><script src="/to-life/assets/js/2.37b775d4.js" defer></script><script src="/to-life/assets/js/48.15fba1b8.js" defer></script>
  </body>
</html>
